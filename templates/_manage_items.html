{% for item in items %}
  <div class="item">
    <h3>{{ item.item_name }}</h3>
    <p>{{ item.item_address }}</p>
    <div class="images">
      {% for img_filename in images_by_item.get(item.item_pk, []) %}
        <img src="{{ url_for('static', filename='uploads/' + img_filename) }}" alt="{{ languages.item_image_alt }}"
             style="max-width: 150px;" />
      {% endfor %}
    </div>
    <p>
      {{ languages.price }}: 
      {% if lan == "en" %}
        {{ "{:,}".format(item.item_price) }} USD
      {% elif lan == "dk" %}
        {{ "{:,.0f}".format(item.item_price * rates.rates.DKK) }} DKK
      {% else %}
        {{ "{:,}".format(item.item_price) }} USD
      {% endif %}
    </p>
  </div>


        <button class="btn-secondary" onclick="toggleEdit('{{ item.item_pk }}')">{{ languages.edit }}</button>

        <form id="edit-form-{{ item.item_pk }}" class="edit-form"
          action="{{ url_for('update_item_inline', item_pk=item.item_pk, lan=lan) }}" method="POST"
          style="display: none; margin-top: 1em;">
          <div class="form-group">
            <label>
              <span class="label">{{ languages.shelter_name }}</span>
              <input type="text" name="item_name" value="{{ item.item_name }}" mix-check="{{ x.ITEM_NAME_REGEX }}">
            </label>
          </div>
          <div class="form-group">
            <label>
              <span class="label">{{ languages.shelter_address }}</span>
              <input type="text" name="item_address" value="{{ item.item_address }}"
                mix-check="{{ x.ITEM_ADDRESS_REGEX }}">
            </label>
          </div>
          <div class="form-group">
            <label>
              <span class="label">{{ languages.latitude }}</span>
              <input type="text" name="item_lat" value="{{ item.item_lat }}" mix-check="{{ x.LATITUDE_REGEX }}">
            </label>
          </div>
          <div class="form-group">
            <label>
              <span class="label">{{ languages.longitude }}</span>
              <input type="text" name="item_lon" value="{{ item.item_lon }}" mix-check="{{ x.LONGITUDE_REGEX }}">
            </label>
          </div>
          <div class="form-group">
            <label>
              <span class="label">{{ languages.price }}</span>
              <input type="text" name="item_price" value="{{ item.item_price }}" mix-check="{{ x.ITEM_PRICE_REGEX }}">
            </label>
          </div>
          <button type="submit" class="btn-primary">{{ languages.save }}</button>
          <button type="button" onclick="toggleEdit('{{ item.item_pk }}')" class="btn-secondary">{{ languages.cancel
            }}</button>
        </form>
      </div>
      {% endfor %}

    <script>
              function toggleEdit(itemPk) {
        const form = document.getElementById("edit-form-" + itemPk);
        if (form.style.display === "none") {
          form.style.display = "block";
        } else {
          form.style.display = "none";
        }
      }
    </script>
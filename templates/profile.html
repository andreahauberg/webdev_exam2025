{% include "_head.html" %}

<body>
  {% include "_language_nav.html" %}
  {% include "_header.html" %}
  <main id="profile" mix-title="{{ languages.profile }}">
    <div id="toast-container" class="toast-container">
      {% if message %}
      <div class="toast toast-{{ message_type }}">
        {{ message }}
      </div>
      {% endif %}
    </div>

    <h1>{{ languages.profile }}</h1>

    <nav class="tabs">
      <button class="tab-btn active" data-tab="add-item">{{ languages.add_item }}</button>
      <button class="tab-btn" data-tab="manage-items">{{ languages.manage_items }}</button>
      <button class="tab-btn" data-tab="update-profile">{{ languages.update_profile }}</button>
    </nav>
    <section id="add-item" class="tab-content active">
      {% include "_add_item.html" %}
    </section>
    <section id="manage-items" class="tab-content">
      {% include "_manage_items.html" %}
    </section>
    <section id="update-profile" class="tab-content">
      {% include "_update_profile.html" %}
    </section>

    <script>
  document.addEventListener("DOMContentLoaded", () => {
    const tabs = document.querySelectorAll(".tab-btn");
    const contents = document.querySelectorAll(".tab-content");

    function activateTab(tabId) {
      tabs.forEach(t => t.classList.remove("active"));
      contents.forEach(c => c.classList.remove("active"));

      const tab = document.querySelector(`.tab-btn[data-tab="${tabId}"]`);
      const content = document.getElementById(tabId);
      if (tab && content) {
        tab.classList.add("active");
        content.classList.add("active");
      }
    }

    const savedTab = sessionStorage.getItem("activeTab");
    if (savedTab) {
      activateTab(savedTab);
    } else {
      activateTab(tabs[0].getAttribute("data-tab"));
    }

    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        const selected = tab.getAttribute("data-tab");
        activateTab(selected);
        sessionStorage.setItem("activeTab", selected);
      });
    });
  });
</script>

  </main>
  {% include "_footer.html" %}